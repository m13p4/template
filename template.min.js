/**
 * Template - a simple js templating handler 
 * 
 * @version 1.0
 * @author m13p4
 * @copyright Meliantchenkov Pavel
 * @license https://github.com/m13p4/template/blob/master/LICENSE
 */
var Template=function(){function q(l,n){for(var e=n||"_"+Math.floor(1E6+9E5*Math.random()),a=n?"":"var "+e+"='',print=function(s){"+e+"+=s;},PRINT=print;\n",g,d,h,c,f=0,r=0,t=new RegExp(b.r,"g");(g=t.exec(l))&&1E4>r;)d=l.substring(f,g.index),f=g.index+g[0].length,a+=e+"+="+JSON.stringify(d)+";",h="",d=g[1],c=d.indexOf(":"),-1<c&&(h=m(d.substring(0,c)),d=m(d.substring(c+1))),-1<u.indexOf(d)&&(h=d,d=""),h=h.toLowerCase(),"</"==g[0].substr(0,2)?a+="}":""==h?a+=e+"+="+d+";"+b.c:-1<k.js.indexOf(h)?a+=
d+b.c:-1<k["if"].indexOf(h)?a+="if("+d+b.c+"){":-1<k["else"].indexOf(h)?a+="}else{":-1<k.elseif.indexOf(h)?a+="}else if("+d+b.c+"){":-1<k["for"].indexOf(h)?(c={i:d.indexOf("=>")},0>c.i?a+="for("+d+b.c+"){":(c.o=d.substring(0,c.i),c.k=d.substring(c.i+2).split(","),c.v="_"+Math.floor(1E6+9E5*Math.random()),a+="for(var "+c.v+" in "+m(c.o)+b.c+"){",a=1==c.k.length?a+("var "+m(c.k[0])+b.c+"="+m(c.o)+b.c+"["+c.v+"];"):a+("var "+m(c.k[1])+b.c+"="+m(c.o)+b.c+"["+c.v+"], "+m(c.k[0])+b.c+"="+c.v+";"))):-1<
k["while"].indexOf(h)?a+="while("+d+b.c+"){":-1<k.imp.indexOf(h)&&(a+=p[d]?q(p[d].t,e):""),r++;return a+=e+"+="+JSON.stringify(l.substring(f))+";"+(n?"":" return "+e+";")}var f={},b={p:/<\/?\s*\{/.source,s:/\}\s*\/?>/.source,i:/[\s\S]*?/.source,c:"//*/\n"},k={tmpl:["tmpl","template"],"if":["if"],"else":["else"],elseif:["elseif","else if"],"for":["for"],"while":["while"],imp:"imp import inc include req require".split(" "),js:["js","code"]},u=function(){var b=[],f;for(f in k)b=b.concat(k[f]);return b}(),
p={},m=new Function("s","return "+(String.prototype.trim?"s.trim()":"s.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g,'')")+";");b.r=b.p+"("+b.i+")"+b.s;f.addTemplate=function(b,k){p[b]={t:k};return f};f.readTemplate=function(l){var n=new RegExp(b.p+"\\s*("+k.tmpl.join("|")+")\\s*:?\\s*("+b.i+")"+b.s,"gi"),e=0,a,g;"string"!==typeof l&&"function"===typeof Buffer&&Buffer.isBuffer(l)&&(l=l.toString());if("string"!==(a=typeof l))throw'need a "string", "'+a+'" was given.';for(;(g=n.exec(l))&&1E3>e;){a=
g[0];if("</"===a.substr(0,2))a=l.substring(c+h.length,g.index),p[d]={t:a};else{var d=m(g[2]);var h=a;var c=g.index}e++}return f};f.parse=function(b,f){var e=b;var a=f;"object"==typeof e&&(a=e,e="");a=a||{};e=p[e||""];if(e){e.f||(e.f=q(e.t));var g=[null].concat(Object.keys(a));g.push(e.f);a=(new (Function.prototype.bind.apply(Function,g))).apply(null,Object.values(a))}else a="";return a};f.render=f.parse;return f}();"object"===typeof module&&(module.exports=Template);
