/**
 * Template - a simple js templating handler 
 * 
 * @version 1.0
 * @author m13p4
 * @copyright Meliantchenkov Pavel
 */
var Template=function(){function m(e,g){for(var a=g?"":"var PRINT='';",f,b,d,c,h=0,p=0,q=new RegExp(l.r,"g");(f=q.exec(e))&&1E4>p;)b=e.substring(h,f.index),h=f.index+f[0].length,a+="PRINT +="+JSON.stringify(b)+";",d="",b=f[1],c=b.indexOf(":"),-1<c&&(d=k(b.substring(0,c)),b=k(b.substring(c+1))),-1<r.indexOf(b)&&(d=b,b=""),"</"==f[0].substr(0,2)&&(d="/"+d),d=d.toLowerCase(),""==d?a+="PRINT+="+b+";\n//*/\n":"js"==d?a+=b+"\n//*/\n":"if"==d?a+="if("+b+"\n//*/\n){":"else"==d?a+="}else{":"for"==d?(c={i:b.indexOf("=>")},
0>c.i?a+="for("+b+"\n//*/\n){":(c.o=b.substring(0,c.i),c.k=b.substring(c.i+2).split(","),a+="for(var $i in "+k(c.o)+"\n//*/\n){",a=1==c.k.length?a+("var "+k(c.k[0])+"\n//*/\n="+k(c.o)+"\n//*/\n[$i];"):a+("var "+k(c.k[1])+"\n//*/\n="+k(c.o)+"\n//*/\n[$i], "+k(c.k[0])+"\n//*/\n=$i;"))):"inc"==d?a+=n[b]?m(n[b].t,!0):"":"/"==d.charAt(0)&&(a+="}"),p++;a+="PRINT+="+JSON.stringify(e.substring(h))+";";return a+(g?"":" return PRINT;")}var h={},l={p:"<{",s:"}>",cp:"</{",cs:"}/>",r:"<\\/?\\s*\\{([\\s\\S]*?)\\}\\s*\\/?>"},
r="tmpl template if else for inc include js".split(" "),n={},k=String.prototype.trim?function(e){return e.trim()}:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")};h.addTemplate=function(e,g){n[e]={t:g};return h};h.readTemplate=function(e){for(var g=0,a,f,b,d,c,m=0;-1<(g=e.indexOf(l.p+"tmpl",g))&&1E3>m;)(a=e.indexOf(l.s,g))&&-1<a&&(d=e.indexOf(l.cp+"tmpl",a))&&-1<d&&(f=e.substring(g+l.p.length,a))&&(c=e.substring(a+l.s.length,d))&&(b=k(f.substr(5))||""),c&&(n[b]={t:c}),g=d+l.cp.length+
4+l.s.length,m++;return h};h.parse=function(e,g){var a=e;var f=g;"object"==typeof a&&(f=a,a="");(a=n[a||""])?(a.f||(a.f=m(a.t)),a="return function("+(Object.keys(f).join(",")+"\n//*/\n")+"){"+a.f+"}",f=(new Function(a))().apply(null,Object.values(f))):f="";return f};return h}();
