/**
 * Template - a simple js templating handler 
 * 
 * @version 1.0
 * @author m13p4
 * @copyright Meliantchenkov Pavel
 * @license https://github.com/m13p4/template/blob/master/LICENSE
 */
var Template=function(){function p(e,m){for(var d=m||"_"+Math.floor(1E6+9E5*Math.random()),a=m?"":"var "+d+"='',print=function(s){"+d+"+=s;},PRINT=print;\n",g,c,h,b,f=0,q=0,r=RegExp("<\\/?\\s*\\{([\\s\\S]*?)\\}\\s*\\/?>","g");(g=r.exec(e))&&1E4>q;)c=e.substring(f,g.index),f=g.index+g[0].length,a+=d+"+="+JSON.stringify(c)+";",h="",c=g[1],b=c.indexOf(":"),-1<b&&(h=l(c.substring(0,b)),c=l(c.substring(b+1))),-1<t.indexOf(c)&&(h=c,c=""),h=h.toLowerCase(),"</"==g[0].substr(0,2)?a+="}":""==h?a+=d+"+="+c+
";//*/\n":-1<k.js.indexOf(h)?a+=c+"//*/\n":-1<k["if"].indexOf(h)?a+="if("+c+"//*/\n){":-1<k["else"].indexOf(h)?a+="}else{":-1<k.elseif.indexOf(h)?a+="}else if("+c+"//*/\n){":-1<k["for"].indexOf(h)?(b={i:c.indexOf("=>")},0>b.i?a+="for("+c+"//*/\n){":(b.o=c.substring(0,b.i),b.k=c.substring(b.i+2).split(","),b.v="_"+Math.floor(1E6+9E5*Math.random()),a+="for(var "+b.v+" in "+l(b.o)+"//*/\n){",a=1==b.k.length?a+("var "+l(b.k[0])+"//*/\n="+l(b.o)+"//*/\n["+b.v+"];"):a+("var "+l(b.k[1])+"//*/\n="+l(b.o)+
"//*/\n["+b.v+"], "+l(b.k[0])+"//*/\n="+b.v+";"))):-1<k["while"].indexOf(h)?a+="while("+c+"//*/\n){":-1<k.imp.indexOf(h)&&(a+=n[c]?p(n[c].t,d):""),q++;return a+=d+"+="+JSON.stringify(e.substring(f))+";"+(m?"":" return "+d+";")}var f={},k={tmpl:["tmpl","template"],"if":["if"],"else":["else"],elseif:["elseif","else if"],"for":["for"],"while":["while"],imp:"imp import inc include req require".split(" "),js:["js","code"]},t=function(){var e=[],f;for(f in k)e=e.concat(k[f]);return e}(),n={},l=new Function("s",
"return "+(String.prototype.trim?"s.trim()":"s.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g,'')")+";");f.addTemplate=function(e,k){n[e]={t:k};return f};f.readTemplate=function(e){var m=new RegExp("<\\/?\\s*\\{\\s*("+k.tmpl.join("|")+")\\s*:?\\s*([\\s\\S]*?)\\}\\s*\\/?>","gi"),d=0,a,g;"string"!==typeof e&&"function"===typeof Buffer&&Buffer.isBuffer(e)&&(e=e.toString());if("string"!==(a=typeof e))throw'need a "string", "'+a+'" was given.';for(;(g=m.exec(e))&&1E3>d;){a=g[0];if("</"===a.substr(0,
2))a=e.substring(b+h.length,g.index),n[c]={t:a};else{var c=l(g[2]);var h=a;var b=g.index}d++}return f};f.parse=function(e,f){var d=e;var a=f;"object"==typeof d&&(a=d,d="");a=a||{};d=n[d||""];if(d){d.f||(d.f=p(d.t));var g=[null].concat(Object.keys(a));g.push(d.f);a=(new (Function.prototype.bind.apply(Function,g))).apply(null,Object.values(a))}else a="";return a};f.render=f.parse;return f}();"object"===typeof module&&(module.exports=Template);
